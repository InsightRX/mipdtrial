<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Sampling times can usually be pre-specified if the dosing schedule is fixed.
In that case a scheme can be specified with static timepoints e.g.
time = c(1, 7.5, 25, 31.5) for taking peak-trough samples at dose
1 and 4 for an 8-hour regimen.
However, when the dosing interval is adaptive, the peak and trough sampling
times cannot stay static and have to be adapted on-the-fly during
simulations. In that case, it is possible to use when to specify
sampling at peak, trough or dose concentrations. In that case, the
time is not allowed. If not exact peak and trough concentrations should be
sample, use the offset parameter to sample e.g. an hour post-peak, or
shortly before true troughs."><title>Function for creating sampling designs. — create_sampling_design • mipdtrial</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function for creating sampling designs. — create_sampling_design"><meta property="og:description" content="Sampling times can usually be pre-specified if the dosing schedule is fixed.
In that case a scheme can be specified with static timepoints e.g.
time = c(1, 7.5, 25, 31.5) for taking peak-trough samples at dose
1 and 4 for an 8-hour regimen.
However, when the dosing interval is adaptive, the peak and trough sampling
times cannot stay static and have to be adapted on-the-fly during
simulations. In that case, it is possible to use when to specify
sampling at peak, trough or dose concentrations. In that case, the
time is not allowed. If not exact peak and trough concentrations should be
sample, use the offset parameter to sample e.g. an hour post-peak, or
shortly before true troughs."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mipdtrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/busulfan_mipd.html">Busulfan MIPD</a>
    <a class="dropdown-item" href="../articles/pegasp_mipd.html">PEG Asparaginase</a>
    <a class="dropdown-item" href="../articles/sample_timing.html">Effect of sample timing</a>
    <a class="dropdown-item" href="../articles/vancomycin_interval_adaptation.html">Dose and interval adaptation (vancomycin)</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Function for creating sampling designs.</h1>
      
      <div class="d-none name"><code>create_sampling_design.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sampling times can usually be pre-specified if the dosing schedule is fixed.
In that case a scheme can be specified with static timepoints e.g.
<code>time = c(1, 7.5, 25, 31.5)</code> for taking peak-trough samples at dose
1 and 4 for an 8-hour regimen.
However, when the dosing interval is adaptive, the peak and trough sampling
times cannot stay static and have to be adapted on-the-fly during
simulations. In that case, it is possible to use <code>when</code> to specify
sampling at <code>peak</code>, <code>trough</code> or <code>dose</code> concentrations. In that case, the
<code>time</code> is not allowed. If not exact peak and trough concentrations should be
sample, use the <code>offset</code> parameter to sample e.g. an hour post-peak, or
shortly before true troughs.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_sampling_design</span><span class="op">(</span></span>
<span>  time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  when <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  offset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  at <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  anchor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dose"</span>, <span class="st">"day"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>time</dt>
<dd><p>a vector of numeric values. If no <code>at</code> values are specified,
these will be used as the fixed sampling times in the simulated trial.
If <code>at</code> values are supplied, the sampling times  will be calculated
adaptively during the trial. The <code>at</code> determine which dose or day is
used as reference, and <code>time</code> will be relative to the specified <code>at</code> anchor.</p></dd>


<dt>when</dt>
<dd><p>character vector of same length as <code>time</code> (or single
value) determining how to interpret the provided sampling <code>time</code>. If <code>NULL</code>
will use the dose time as offset (default). Other options are <code>cmax</code> or
<code>peak</code>, which will use the end of infusion as the base for the <code>time</code>, or
<code>cmin</code> or <code>trough</code>, which will use the time of next dose as the offset.</p></dd>


<dt>offset</dt>
<dd><p>offset from standardized PK moments specified in <code>when</code>.</p></dd>


<dt>at</dt>
<dd><p>numeric vector of the dose or day number to "anchor"
the sampling times to. Vector needs to be of same length as <code>time</code>.
If <code>anchor</code> is set to <code>day</code>, then the first dose in that day is used.
If later doses in the day are preferred, the anchor can also be specified
fractionally, e.g. <code>1.5</code> will use the time of the first dose in the
second half of the 1st day.</p></dd>


<dt>anchor</dt>
<dd><p>either <code>day</code> or <code>dose</code>. Single value required, i.e. anchor
types cannot be mixed.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># to sample at 1.5/8.5/23.5 hours</span></span></span>
<span class="r-in"><span><span class="fu">create_sampling_design</span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">11.5</span>, <span class="fl">23.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   base offset at anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 dose    1.5  1   dose</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 dose   11.5  1   dose</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 dose   23.5  1   dose</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to sample at the peak (end of infusion) and trough (start of</span></span></span>
<span class="r-in"><span><span class="co"># next dose) of each dose</span></span></span>
<span class="r-in"><span><span class="fu">create_sampling_design</span><span class="op">(</span></span></span>
<span class="r-in"><span>  when <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"peak"</span>, <span class="st">"trough"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     base offset at anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   peak      0  1   dose</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 trough      0  1   dose</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to sample 30 min post-peak and 30-min pre-trough for the first dose</span></span></span>
<span class="r-in"><span><span class="fu">create_sampling_design</span><span class="op">(</span></span></span>
<span class="r-in"><span>  when <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"peak"</span>, <span class="st">"trough"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     base offset at anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   peak    0.5  1   dose</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 trough   -0.5  1   dose</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The same as above, but now for the first and third dose</span></span></span>
<span class="r-in"><span><span class="fu">create_sampling_design</span><span class="op">(</span></span></span>
<span class="r-in"><span>  when <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"peak"</span>, <span class="st">"trough"</span>, <span class="st">"peak"</span>, <span class="st">"trough"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  anchor <span class="op">=</span> <span class="st">"dose"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     base offset at anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   peak    0.5  1   dose</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 trough   -0.5  1   dose</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   peak    0.5  3   dose</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 trough   -0.5  3   dose</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jasmine Hughes, Ron Keizer, InsightRX.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

