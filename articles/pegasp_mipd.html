<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Custom initial dose nomogram, a PEG Asparaginase case study • mipdtrial</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Custom initial dose nomogram, a PEG Asparaginase case study">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mipdtrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/busulfan_mipd.html">Model misspecification, a busulfan case study</a></li>
    <li><a class="dropdown-item" href="../articles/pegasp_mipd.html">Custom initial dose nomogram, a PEG Asparaginase case study</a></li>
    <li><a class="dropdown-item" href="../articles/sample_timing_yaml.html">Effect of sample timing (YAML example)</a></li>
    <li><a class="dropdown-item" href="../articles/sample_timing.html">Effect of sample timing (R example)</a></li>
    <li><a class="dropdown-item" href="../articles/vancomycin_interval_adaptation.html">Dose and interval adaptation (vancomycin)</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Custom initial dose nomogram, a PEG Asparaginase case study</h1>
            
      

      <div class="d-none name"><code>pegasp_mipd.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we will demonstrate the following tools:</p>
<ul>
<li>using {mipdtrial} to simulate a trial, with the trial design
specified using R code.</li>
<li>writing a custom function to handle initial dosing.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mipdtrial</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/InsightRX/PKPDsim" class="external-link">PKPDsim</a></span><span class="op">)</span> <span class="co"># for working with models</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"pkpegasparaginasemodifiedwurthwein"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://insightrx.github.io/PKPDsim/reference/install_default_literature_model.html" class="external-link">install_default_literature_model</a></span><span class="op">(</span><span class="st">"pk_pegasparaginase_modified_wurthwein"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># For data handling/plotting</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="define-simulation-parameters">1. Define simulation parameters<a class="anchor" aria-label="anchor" href="#define-simulation-parameters"></a>
</h2>
<p>Initial dosing algorithms must return a PKPDsim-style regimen object,
and have access to three objects:</p>
<ul>
<li>
<code>covariates</code>: patient-level covariates</li>
<li>
<code>design</code>: a named list of PKPDsim-style covariates
(created with <code>create_trial_design</code>)</li>
<li>
<code>cov_mapping</code>: described later in this vignette</li>
</ul>
<p>Initial PEG-asparaginase dosing is 2500 IU/m2 for patients older than
22 years (inclusive) and 2000 IU/m2 for patients younger than 22 years
(exclusive), with doses capped at a maximum total dose of 3750 IU. For
our nomogram, we only need the information stored in
<code>covariates</code>. Let’s define this function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">asp_nomogram</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">covariates</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">covariates</span><span class="op">$</span><span class="va">AGE</span><span class="op">$</span><span class="va">value</span> <span class="op">&gt;=</span> <span class="fl">22</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dose</span> <span class="op">&lt;-</span> <span class="fl">2500</span> <span class="op">*</span> <span class="va">covariates</span><span class="op">$</span><span class="va">BSA</span><span class="op">$</span><span class="va">value</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">dose</span> <span class="op">&lt;-</span> <span class="fl">2000</span> <span class="op">*</span> <span class="va">covariates</span><span class="op">$</span><span class="va">BSA</span><span class="op">$</span><span class="va">value</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># cap dose to a maximum of 3750</span></span>
<span>  <span class="va">dose</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="va">dose</span>, <span class="fl">3750</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># create initial dosing regimen (see PKPDsim::new_regimen for more info)</span></span>
<span>  <span class="fu">PKPDsim</span><span class="fu">::</span><span class="fu"><a href="https://insightrx.github.io/PKPDsim/reference/new_regimen.html" class="external-link">new_regimen</a></span><span class="op">(</span></span>
<span>    amt <span class="op">=</span> <span class="va">dose</span>, </span>
<span>    interval <span class="op">=</span> <span class="fl">14</span> <span class="op">*</span> <span class="fl">24</span>, <span class="co"># 14 days, converted to hours</span></span>
<span>    n <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    t_inf <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"infusion"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">initial_method</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_initial_regimen_design.html">create_initial_regimen_design</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">asp_nomogram</span><span class="op">)</span></span></code></pre></div>
<p>PEG-asparaginase has a long half-life. In this simulated trial,
patients will receive 4 doses separated by 14 days levels collected
every 14 days just prior to the next dose. We will adjust doses 2 and 3
to achieve a steady state asparaginase activity level of of 300 IU/L
(0.3 IU/mL) (goal: 0.1 - 0.5 IU/mL)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdm_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sampling_design.html">create_sampling_design</a></span><span class="op">(</span></span>
<span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13.9</span><span class="op">*</span><span class="fl">24</span>,  <span class="fl">27.9</span><span class="op">*</span><span class="fl">24</span>,  <span class="fl">41.9</span><span class="op">*</span><span class="fl">24</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">update_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_regimen_update_design.html">create_regimen_update_design</a></span><span class="op">(</span></span>
<span>  at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  anchor <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>  dose_optimization_method <span class="op">=</span> <span class="va">map_adjust_dose</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">target_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_target_design.html">create_target_design</a></span><span class="op">(</span></span>
<span>  targettype <span class="op">=</span> <span class="st">"cmin"</span>, </span>
<span>  targetvalue <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  at <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  anchor <span class="op">=</span> <span class="st">"dose"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">evaluation_design2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_eval_design.html">create_eval_design</a></span><span class="op">(</span></span>
<span>  evaltype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"conc"</span>, <span class="st">"auc24"</span><span class="op">)</span>,</span>
<span>  at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">28</span>, <span class="fl">42</span><span class="op">)</span>,</span>
<span>  anchor <span class="op">=</span> <span class="st">"day"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model_design.html">create_model_design</a></span><span class="op">(</span>lib <span class="op">=</span> <span class="st">"pkpegasparaginasemodifiedwurthwein"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">initial_method</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_initial_regimen_design.html">create_initial_regimen_design</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">asp_nomogram</span><span class="op">)</span></span>
<span></span>
<span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_trial_design.html">create_trial_design</a></span><span class="op">(</span></span>
<span>  sampling_design <span class="op">=</span> <span class="va">tdm_design</span>,</span>
<span>  target_design <span class="op">=</span> <span class="va">target_design</span>,</span>
<span>  regimen_update_design <span class="op">=</span> <span class="va">update_design</span>,</span>
<span>  initial_regimen_design <span class="op">=</span> <span class="va">initial_method</span>,</span>
<span>  sim_design <span class="op">=</span> <span class="va">model_design</span>, </span>
<span>  est_design <span class="op">=</span> <span class="va">model_design</span>,</span>
<span>  eval_design <span class="op">=</span> <span class="va">evaluation_design2</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="create-a-set-of-digital-patient-covariates">2. Create a set of digital patient covariates<a class="anchor" aria-label="anchor" href="#create-a-set-of-digital-patient-covariates"></a>
</h2>
<p>We will create an example data set of 20 individuals originally drawn
from the NHANES data set. This data set was created from survey data
collected by the US National Center for Health Statistics from a general
sampling of the US population, and is available in the NHANES R
package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,</span>
<span>  Sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7L</span>, <span class="fl">13L</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">9</span>, <span class="fl">13</span>, <span class="fl">11</span>, <span class="fl">6</span>, <span class="fl">16</span>, <span class="fl">9</span>, <span class="fl">4</span>, <span class="fl">9</span>, <span class="fl">8</span>, <span class="fl">16</span>, <span class="fl">8</span>, <span class="fl">17</span>, <span class="fl">12</span>, <span class="fl">16</span>, <span class="fl">8</span>, <span class="fl">3</span>, <span class="fl">17</span>, <span class="fl">13</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>  Weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">38.6</span>, <span class="fl">53.1</span>, <span class="fl">45.1</span>, <span class="fl">43.4</span>, <span class="fl">20.7</span>, <span class="fl">48.7</span>, <span class="fl">59.7</span>, <span class="fl">17</span>, <span class="fl">29.8</span>, <span class="fl">35.2</span>, <span class="fl">73.2</span>, <span class="fl">40.1</span>, <span class="fl">72.3</span>,</span>
<span>    <span class="fl">57.7</span>, <span class="fl">88.9</span>, <span class="fl">24.6</span>, <span class="fl">11.6</span>, <span class="fl">103.8</span>, <span class="fl">74</span>, <span class="fl">25.5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  Height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">141.8</span>, <span class="fl">139.2</span>, <span class="fl">157.6</span>, <span class="fl">153.8</span>, <span class="fl">112.9</span>, <span class="fl">158.4</span>, <span class="fl">146.7</span>, <span class="fl">105.4</span>, <span class="fl">133.1</span>, <span class="fl">130.6</span>, <span class="fl">172</span>,</span>
<span>    <span class="fl">128.4</span>, <span class="fl">176</span>, <span class="fl">158.9</span>, <span class="fl">183.3</span>, <span class="fl">125.6</span>, <span class="fl">89.9</span>, <span class="fl">181.5</span>, <span class="fl">173.7</span>, <span class="fl">129.6</span></span>
<span>  <span class="op">)</span>,</span>
<span>  BSA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">1.233</span>, <span class="fl">1.433</span>, <span class="fl">1.405</span>, <span class="fl">1.362</span>, <span class="fl">0.806</span>, <span class="fl">1.464</span>, <span class="fl">1.56</span>, <span class="fl">0.705</span>, <span class="fl">1.05</span>, <span class="fl">1.13</span>, </span>
<span>    <span class="fl">1.87</span>, <span class="fl">1.196</span>, <span class="fl">1.88</span>, <span class="fl">1.596</span>, <span class="fl">2.128</span>, <span class="fl">0.926</span>, <span class="fl">0.538</span>, <span class="fl">2.288</span>, <span class="fl">1.89</span>, <span class="fl">0.958</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We also need to link the covariates in our data set to the covariates
expected in the model:</p>
<ul>
<li>
<p>To check which covariates are required for your model use
<code><a href="https://insightrx.github.io/PKPDsim/reference/get_model_info.html" class="external-link">PKPDsim::get_model_covariates()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://insightrx.github.io/PKPDsim/reference/get_model_info.html" class="external-link">get_model_covariates</a></span><span class="op">(</span><span class="va">model_design</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "AGE" "SEX" "HT"  "WT"</span></span></code></pre></div>
</li>
<li>
<p>To check which covariates are in your data set use
<code><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ID"     "Sex"    "Age"    "Weight" "Height" "BSA"</span></span></code></pre></div>
</li>
</ul>
<p>After checking the covariates, we can link them in a named character
vector, where the model covariates are names and the data covariates are
values. Because our initial dosing nomogram relies on BSA, we also need
to include BSA in this mapping object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cov_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  AGE <span class="op">=</span> <span class="st">"Age"</span>, </span>
<span>  WT <span class="op">=</span> <span class="st">"Weight"</span>, </span>
<span>  HT <span class="op">=</span> <span class="st">"Height"</span>, </span>
<span>  SEX <span class="op">=</span> <span class="st">"Sex"</span>,</span>
<span>  BSA <span class="op">=</span> <span class="st">"BSA"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simulate-a-trial">3. Simulate a trial!<a class="anchor" aria-label="anchor" href="#simulate-a-trial"></a>
</h2>
<p>To run our trial, we just call <code><a href="../reference/run_trial.html">run_trial()</a></code>! This
function does a lot under-the-hood.</p>
<p>For inter-individual variability terms, we will use the
inter-individual variability described by our model, since this should
reflect the distribution in patient pharmacokinetics. Later, we will
estimate the individual PK parameters using our estimation model and the
measured TDMs we “collect”.</p>
<p>For residual error terms, we will use the residual error of our
model, since this is supposed to reflect the unexplained error (assay
error, etc.). This function creates a data frame of error to add to each
simulated concentration to produced a measured therapeutic drug
monitoring sample.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_trial.html">run_trial</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat</span>, design <span class="op">=</span> <span class="va">design</span>, cov_mapping <span class="op">=</span> <span class="va">cov_map</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; ================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================</span></span></code></pre></div>
<p>Here are the first few rows of our simulation results:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">final_exposure</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id conc_true conc_est tta</span></span>
<span><span class="co">#&gt; 1  1  290.6750 299.9586 673</span></span>
<span><span class="co">#&gt; 2  2  326.4004 299.9957 673</span></span>
<span><span class="co">#&gt; 3  3  289.9764 299.9648 673</span></span>
<span><span class="co">#&gt; 4  4  315.6666 300.0880 673</span></span>
<span><span class="co">#&gt; 5  5  291.9871 300.1848 673</span></span>
<span><span class="co">#&gt; 6  6  389.1166 299.9973 Inf</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analyze-results">4. Analyze results<a class="anchor" aria-label="anchor" href="#analyze-results"></a>
</h2>
<p>How well did our patients get to target?</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">final_exposure</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span>, names_to <span class="op">=</span> <span class="st">"conc_type"</span>, values_to <span class="op">=</span> <span class="st">"conc"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">conc_type</span>, y <span class="op">=</span> <span class="va">conc</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_rect</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>        xmin <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, xmax <span class="op">=</span> <span class="cn">Inf</span>, </span>
<span>        ymin <span class="op">=</span> <span class="va">target_design</span><span class="op">$</span><span class="va">min</span>, ymax <span class="op">=</span> <span class="va">target_design</span><span class="op">$</span><span class="va">max</span>,</span>
<span>      <span class="op">)</span>,</span>
<span>      fill <span class="op">=</span> <span class="st">"grey80"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">target_design</span><span class="op">$</span><span class="va">max</span> <span class="op">*</span> <span class="fl">1.3</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">"Concentration type"</span>,</span>
<span>      y <span class="op">=</span> <span class="st">"Final concentration after MIPD (IU/L)"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p><img src="pegasp_mipd_files/figure-html/unnamed-chunk-11-1.png" width="192"></p>
<p>We can also check how well our patients did across days 14, 28, and
42.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">eval_exposure</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"conc"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>time <span class="op">=</span> <span class="va">time</span><span class="op">/</span><span class="fl">24</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">value</span>, group <span class="op">=</span> <span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Day"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Concentration(IU/L)"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="pegasp_mipd_files/figure-html/unnamed-chunk-12-1.png" width="192"></p>
<p>While further work is needed to establish a realistic upper toxicity
threshold to inform the therapeutic window of PEG-asparaginase, an MIPD
approach informed by AAL levels which are already germane to therapeutic
care with PEG-asparaginase may translate to better target attainment and
cost savings. For further details, see <a href="https://www.page-meeting.org/default.asp?abstract=10796" class="external-link">Brooks et
al., PAGE Meeting; June 26-28, 2024, Rome, Italy.</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jasmine Hughes, Ron Keizer, InsightRX.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
